<!DOCTYPE html>
<html lang="en">
  <head>
  	<title>{user.name} :: {user.type}</title>
  	<meta name="viewport" content="width=device-width, initial-scale=1.0">
  	<link type="text/css" href="/css/bootstrap.css" rel="stylesheet">
  	<link type="text/css" href="/css/bootstrap-responsive.css" rel="stylesheet">
  	<script type="text/javascript" src="/js/jquery-1.7.2.min.js"></script>
  	<script type="text/javascript" src="/js/bootstrap.js"></script>
  	<script type="text/javascript" src="/js/user.js"></script>
  	<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
  	<!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
  	<div class="container-fluid">
  		<div class="row-fluid">
	  		{>"views/user.dust"/}
	  	</div>
  		<div class="row-fluid">
  			{>"views/contents.dust"/}
  			<div class="span9">
  				<ul class="nav">
  					<li class="nav-header">
  						<h3>User 
  							<small style="text-transform:none">{user.name}</small>
  						</h3>
  					</li>
  				</ul>
  				<div class="row-fluid">
  					<ul class="nav nav-tabs">
  						<li class="active">
  							<a href="#" data-toggle="tab" data-target="#updateuser">
  								User Settings
  							</a>
  						</li>
  						{^user.perm}
  						<li>
  							<a href="#" data-toggle="tab" data-target="#userprojects">
  								User Projects
  							</a>
  						</li>
  						{/user.perm}
  					</ul>
  				</div>
  				<div class="row-fluid tab-content">
				  	<div class="tab-pane active" id="updateuser">
				  		<div style="margin-left:5px">
				  			<form class="form-inline" action="/users/{user.id}/update" method="POST" name="userForm">
				  			{?user.auth}
				  				<input name="type" type="radio" class="input" value="admin" checked="checked" onclick="return false"> Admin 
									<input name="type" type="radio" class="input" value="employee" onclick="updateType()"> Employee 
									<input name="type" type="radio" class="input" value="client" disabled="disabled" onclick="return false"> Client
								{:else}
									{?user.perm}
									<input name="type" type="radio" class="input" value="admin" onclick="updateType()"> Admin 
									<input name="type" type="radio" class="input" value="employee" checked="checked" onclick="return false"> Employee 
									<input name="type" type="radio" class="input" value="client" disabled="disabled" onclick="return false"> Client
									{:else}
									<input name="type" type="radio" class="input" value="admin" disabled="disabled" onclick="return false"> Admin 
									<input name="type" type="radio" class="input" value="employee" disabled="disabled" onclick="return false"> Employee 
									<input name="type" type="radio" class="input" value="client" checked="checked" disabled="disabled" onclick="return false"> Client
									{/user.perm}
								{/user.auth}
								</form>
				  		</div>
				  	</div>
				  	{^user.perm}
						<div class="tab-pane" id="userprojects">
							{?userProjects}
							<ul style="text-align:left">
								{#userProjects}
								<li>
									{?auth}
										<a href="/projects/{.uri}">{.name}</a>
									{:else}
										{.name}
									{/auth}
									{?.users}
									<br/>Members
									<ul>
										{#.users}
										{?auth}
										<li><a href="/users/{.id}">{.name}</a></li>
										{:else}
										<li>{.name}</li>
										{/auth}
										{/.users}
									</ul>
									{/.users}
								</li>
								{@sep}
								<li style="list-style-type:none"><br/></li>
								{/sep}
								{/userProjects}
							</ul>
							{:else}
							No projects!
							{/userProjects}
						</div>
						{/user.perm}
					</div>
				</div>
			</div>
		</div>
  </body>
</html>